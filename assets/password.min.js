window.Modals=(function(){function a(e,c,b){var d={close:".js-modal-close",open:".js-modal-open-"+c,openClass:"modal--is-active"};this.$modal=$("#"+e);if(!this.$modal.length){return false}this.nodes={$parent:$("html").add("body")};this.config=$.extend(d,b);this.modalIsOpen=false;this.$focusOnOpen=this.config.focusOnOpen?$(this.config.focusOnOpen):this.$modal;this.init()}a.prototype.init=function(){var b=$(this.config.open);b.attr("aria-expanded","false");$(this.config.open).on("click",$.proxy(this.open,this));this.$modal.find(this.config.close).on("click",$.proxy(this.close,this))};a.prototype.open=function(b){var c=false;if(this.modalIsOpen){return}if(b){b.preventDefault()}else{c=true}if(b&&b.stopPropagation){b.stopPropagation();this.$activeSource=$(b.currentTarget)}if(this.modalIsOpen&&!c){this.close()}this.$modal.addClass(this.config.openClass);this.nodes.$parent.addClass(this.config.openClass);this.modalIsOpen=true;slate.a11y.trapFocus({$container:this.$modal,$elementToFocus:this.$focusOnOpen,namespace:"modal_focus"});if(this.$activeSource&&this.$activeSource.attr("aria-expanded")){this.$activeSource.attr("aria-expanded","true")}this.bindEvents()};a.prototype.close=function(){if(!this.modalIsOpen){return}$(document.activeElement).trigger("blur");this.$modal.removeClass(this.config.openClass);this.nodes.$parent.removeClass(this.config.openClass);this.modalIsOpen=false;slate.a11y.removeTrapFocus({$container:this.$modal,namespace:"modal_focus"});if(this.$activeSource&&this.$activeSource.attr("aria-expanded")){this.$activeSource.attr("aria-expanded","false").focus()}this.unbindEvents()};a.prototype.bindEvents=function(){this.nodes.$parent.on("keyup.modal",$.proxy(function(b){if(b.keyCode===27){this.close()}},this))};a.prototype.unbindEvents=function(){this.nodes.$parent.off(".modal")};return a})();$(function(){var b=$("#LoginModal");if(!b.length){return}var a=new window.Modals("LoginModal","login-modal",{focusOnOpen:"#Password"});if(b.find(".errors").length){a.open()}});