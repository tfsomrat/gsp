<div class="container">
    <!-- START Breadcrumbs -->
    <div class="row">
        {% render 'breadcrumbs' %}
    </div>
    <!-- END Breadcrumbs -->
</div>
{% render 'collection-header' %}
<div class="container--custom_filters">
    <div class="sort">
        <div class="sort_total"><span>{% if template.name == 'search' %}{{ search.results_count }}{% else %}{{ collection.all_products_count }}{% endif %}</span>{{ 'collections.general.product_count' | t }}</div>
        <div class="sort__dropdown">
            <span class="sort__dropdown__buttons sort__dropdown__buttons--sort">{{ 'collections.sorting.title' | t }}</span>
            <span class="sort__dropdown__buttons sort__dropdown__buttons--filters">{{ 'collections.sorting.refine' | t }}
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M0.8 3.2H3.348C3.6792 4.1288 4.5584 4.8 5.6 4.8C6.6416 4.8 7.5208 4.1288 7.852 3.2H15.2C15.6424 3.2 16 2.8424 16 2.4C16 1.9576 15.6424 1.6 15.2 1.6H7.852C7.5208 0.6712 6.6416 0 5.6 0C4.5584 0 3.6792 0.6712 3.348 1.6H0.8C0.3576 1.6 0 1.9576 0 2.4C0 2.8424 0.3576 3.2 0.8 3.2ZM15.2 12.8H7.852C7.5208 11.8712 6.6416 11.2 5.6 11.2C4.5584 11.2 3.6792 11.8712 3.348 12.8H0.8C0.3576 12.8 0 13.1576 0 13.6C0 14.0424 0.3576 14.4 0.8 14.4H3.348C3.6792 15.3288 4.5584 16 5.6 16C6.6416 16 7.5208 15.3288 7.852 14.4H15.2C15.6424 14.4 16 14.0424 16 13.6C16 13.1576 15.6424 12.8 15.2 12.8ZM15.2 7.2H12.652C12.3208 6.2712 11.4416 5.6 10.4 5.6C9.3584 5.6 8.4792 6.2712 8.148 7.2H0.8C0.3576 7.2 0 7.5576 0 8C0 8.4424 0.3576 8.8 0.8 8.8H8.148C8.4792 9.7288 9.3584 10.4 10.4 10.4C11.4416 10.4 12.3208 9.7288 12.652 8.8H15.2C15.6424 8.8 16 8.4424 16 8C16 7.5576 15.6424 7.2 15.2 7.2ZM5.6 1.6C6.0416 1.6 6.4 1.9584 6.4 2.4C6.4 2.8416 6.0416 3.2 5.6 3.2C5.1584 3.2 4.8 2.8416 4.8 2.4C4.8 1.9584 5.1584 1.6 5.6 1.6ZM5.6 14.4C5.1584 14.4 4.8 14.0416 4.8 13.6C4.8 13.1584 5.1584 12.8 5.6 12.8C6.0416 12.8 6.4 13.1584 6.4 13.6C6.4 14.0416 6.0416 14.4 5.6 14.4ZM10.4 8.8C9.9584 8.8 9.6 8.4416 9.6 8C9.6 7.5584 9.9584 7.2 10.4 7.2C10.8416 7.2 11.2 7.5584 11.2 8C11.2 8.4416 10.8416 8.8 10.4 8.8Z"
                        fill="#222222" />
                    <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="16">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M0.8 3.2H3.348C3.6792 4.1288 4.5584 4.8 5.6 4.8C6.6416 4.8 7.5208 4.1288 7.852 3.2H15.2C15.6424 3.2 16 2.8424 16 2.4C16 1.9576 15.6424 1.6 15.2 1.6H7.852C7.5208 0.6712 6.6416 0 5.6 0C4.5584 0 3.6792 0.6712 3.348 1.6H0.8C0.3576 1.6 0 1.9576 0 2.4C0 2.8424 0.3576 3.2 0.8 3.2ZM15.2 12.8H7.852C7.5208 11.8712 6.6416 11.2 5.6 11.2C4.5584 11.2 3.6792 11.8712 3.348 12.8H0.8C0.3576 12.8 0 13.1576 0 13.6C0 14.0424 0.3576 14.4 0.8 14.4H3.348C3.6792 15.3288 4.5584 16 5.6 16C6.6416 16 7.5208 15.3288 7.852 14.4H15.2C15.6424 14.4 16 14.0424 16 13.6C16 13.1576 15.6424 12.8 15.2 12.8ZM15.2 7.2H12.652C12.3208 6.2712 11.4416 5.6 10.4 5.6C9.3584 5.6 8.4792 6.2712 8.148 7.2H0.8C0.3576 7.2 0 7.5576 0 8C0 8.4424 0.3576 8.8 0.8 8.8H8.148C8.4792 9.7288 9.3584 10.4 10.4 10.4C11.4416 10.4 12.3208 9.7288 12.652 8.8H15.2C15.6424 8.8 16 8.4424 16 8C16 7.5576 15.6424 7.2 15.2 7.2ZM5.6 1.6C6.0416 1.6 6.4 1.9584 6.4 2.4C6.4 2.8416 6.0416 3.2 5.6 3.2C5.1584 3.2 4.8 2.8416 4.8 2.4C4.8 1.9584 5.1584 1.6 5.6 1.6ZM5.6 14.4C5.1584 14.4 4.8 14.0416 4.8 13.6C4.8 13.1584 5.1584 12.8 5.6 12.8C6.0416 12.8 6.4 13.1584 6.4 13.6C6.4 14.0416 6.0416 14.4 5.6 14.4ZM10.4 8.8C9.9584 8.8 9.6 8.4416 9.6 8C9.6 7.5584 9.9584 7.2 10.4 7.2C10.8416 7.2 11.2 7.5584 11.2 8C11.2 8.4416 10.8416 8.8 10.4 8.8Z"
                            fill="white" />
                    </mask>
                    <g mask="url(#mask0)" />
                </svg>
            </span>
        <div id="sort-tabs" class="sort__tabs"></div>
        </div>

    </div>
    <div class="custom-filters-wrapper collection__page">
        <div id="show-filters">
            <img loading="lazy" class="close-filters js-close-filters" src="{{ 'cross.jpg' | asset_img_url: '30x' }}">
            <div class="filter-option-group-aside">
                <div class="filter-header filter-header--refine">{{ 'collections.sorting.refine' | t }}<a class="clear" href="{% if template.name == 'collection' %}{{ collection.url }}{% elsif template.name == 'search' %}/search?q={{ search.terms }}{% endif %}">Clear All</a></div>
                <div id="filter-summary"></div>
                <div id="filter-tabs" data-id="{{ collection.id }}"></div>
            </div>
            <div class="show-results js-close-filters">{{ 'collections.general.show_results' | t }}</div>
        </div>

        <div id="collection-grid" class="collection-template_grid"></div>
    </div>
    <div id="collection-pagination"></div>

    {% raw %}
        <script id="filter-heading-item" type="x-tmpl-mustache">
            <div class="show-filters">
                <span class="filter-tag-summary" data-tag_title="{{ tag }}">
                    {{ group }} : <strong>{{ tag_clean }}</strong>
                </span>
                <span class="clear" data-tag="{{ tag }}" data-id="{{ id }}">Clear</span> 
            </div>
        </script>

        <script id="filter-item-panel" type="x-tmpl-mustache">
            <div class="filter-header accordion">
                {{ filter_title }}
            </div>
            <div id="data-sort-{{ filter_id }}" class="accordion-panel" filter-search-items >
                <input type="text" name="{{ filter_search }}">
                {{ #filter_items }}
                    <div class="filter" data-sort_tag="{{ key }}">
                        <a class="filter-tag{{#key_active}} is-active{{/key_active}}" data-id="{{ filter_id }}" data-group="{{ filter_title }}" data-tag="{{ key }}">
                            <div class="filter__checkbox"></div>
                            <span>{{ key_clean }}</span>
                        </a>
                        <span class="product-count">({{ key_count }})</span>
                    </div>
                {{ /filter_items }}
                </div>
        </script>

        <script id="filter-item-panel-price" type="x-tmpl-mustache">
            <p>
                £<span id="show-price-min">{{ selected_min_price_round }}</span> - <span id="show-price-max">{{ selected_max_price_round }}</span>
            </p>
            <input oninput="getPriceRange();" type="range" min="{{ min_price_round }}" max="{{ max_price_round }}" value="{{ selected_min_price }}" class="slider" id="lower">
            <input oninput="getPriceRange();" type="range" min="{{ min_price_round }}" max="{{ max_price_round }}" value="{{ selected_max_price }}" class="slider" id="higher">
            <div class="apply-price">Apply</div>
        </script>

        <script id="product-grid-item-template" type="x-tmpl-mustache">
            <div data-product-id="{{ product_id }}" class="product-grid-item {{#second_image}}product-grid-item--has-second{{/second_image}}">
                <a href="{{ url }}">
                    <div class="product-tag {{ tag }}"></div>
                    <div class="product-grid-item_image">
                        <div class="responsive-image__wrapper">
                            <img decoding="async" class="product-grid-item_image_img" loading="lazy" src="{{ image }}" alt="{{ title }} Image">
                            {{#second_image}}
                                <img decoding="async" class="product-grid-item_image_img--second" loading="lazy" src="{{ second_image }}" alt="{{ title }} Image">
                            {{/second_image}}
                        </div>
                    </div>
                    <div class="product-grid-item_content">
                        <p class="product-grid-item_title">{{ title }}</p>
                        <p class="product-grid-item_price">
                            <span>
                                <span>
                                    £{{ price }}
                                </span>
                            </span>
                        </p>
                    </div>
                </a>
            </div>
        </script>

        <script id="pagination-previous" type="x-tmpl-mustache">
            <div {{ ^prev }}style="display: none;"{{ /prev }} class="pagination-previous">
                <a class="btn btn-primary" href="?page={{ prev }}">{% endraw %}{{ 'collections.sorting.previous' | t }}{% raw %}</a>
            </div>
        </script>

        <script id="pagination" type="x-tmpl-mustache">
            <div class="pagination">
                <div class="pagination_nav">
                    <a href="?page={{ prev }}" {{ ^prev }}style="display: none;"{{ /prev }} data-page="{{ prev }}" class="btn btn-secondary slim next-prev_prev pagination-navigate">Previous</a>
                </div>
                <div class="pagination_pages">{{{ pages }}}</div>
                <div class="pagination_nav">
                    <a href="?page={{ next }}" {{ ^next }}style="display: none;"{{ /next }} data-page="{{ next }}" class="btn btn-secondary slim next-prev_next pagination-navigate">Next</a>
                </div>
            </div>
        </script>

        <script id="filter-sort-item-panel" type="x-tmpl-mustache">
            {% endraw %}
                {% if template.name == 'search' %}
                    {% assign sort_options = search.sort_options %}
                {% else %}
                    {% assign sort_options = collection.sort_options %}
                {% endif %}
                {% for option in sort_options %}
                    {% unless option.value == 'title-descending' or option.value == 'title-ascending' %}
                        <div class="collection-sort-item">
                            <label>
                                <input type="radio" name="SortBy" value="{{ option.value }}" data-title="{{ option.name }}" {% if option.value == collection.sort_by %}selected{% endif %}/>
                                {{ option.name }}
                            </label>
                        </div>
                    {% endunless %}
                {% endfor %}
            {% raw %}
        </script>
    {% endraw %}
</div>

{% if template.name == 'collection' %}
    <script>
        var boost_filter_data = {
            title: '{{ collection.title }}',
            url: '{{ collection.url }}',
            base_url: 'https://services.mybcapps.com/bc-sf-filter/filter?shop=get-set-pet-store.myshopify.com',
            collection_id: '{{ collection.id }}',
            sort: 'manual'
        }
    </script>
{% elsif template.name == 'search' %}
    <script>
        const searchTerm = '{{ search.terms }}';
          var boost_filter_data = {
            title: 'Your search for "test"',
            url: '/collections/',
            base_url: 'https://services.mybcapps.com/bc-sf-filter/search?shop=get-set-pet-store.myshopify.com',
            query: '{{ search.terms }}',
            sort: 'manual'
        }
    </script>
{% endif %}
<script src="{{ 'vendor-mustache.min.js' | asset_url }}"></script>
<script src="{{ 'boost-filter.js' | asset_url }}"></script>
{{ 'boost-filter.aio.min.css' | asset_url | stylesheet_tag }}