{%- capture section_id -%}slider-{{block.id}}{%- endcapture -%}
<div class="container">
  <div class="row py-5">
    {% if block.settings.title != blank %}
      <div class="col-12 col-sm-12 text-center">
        <h2 class="title text-center mb-3 mb-sm-4{{ block.settings.title_icon }}">
          {{ block.settings.title }}
        </h2>
      </div>
    {% endif %}
    <div class="{{ section_id }}">
      {%- assign collection = collections[block.settings.collection] -%}
      {% for product in collection.products %}
        {% render 'related-product-item', product: product %}
      {% endfor %}
    </div>
    {% if block.settings.viewall_link != blank %}
      <div class="col-12 col-sm-12 text-center">
        <a class="call-to-action" href="{{ block.settings.viewall_link }}"
          >Shop All
          {% render 'icon-chevron',
            fill_color: '#3eaafd',
            direction: 'right'
          -%}
        </a>
      </div>
    {% endif %}
  </div>

  <style>
    .{{ section_id }}-slide {
        text-align: center;
        border-radius: 5px;
        box-shadow: 0 0 8px 0 #E6E5E5;
        margin: 10px;
    }

    .{{ section_id }}-slide img {
        margin: auto;
        padding: 20px 10px 10px 10px;
        max-width: 190px;
    }

    .{{ section_id }}-slide .detail, .{{ section_id }}-slide .detail a {
        color: black;
        text-decoration: none;
        margin: 15px 0px 25px;
        font-size: 14px;
        font-family: 'Open Sans', sans-serif;
        font-weight: bold;
    }
  </style>
  <script>
    $(document).ready(function () {
      $('.collection__listing-image').matchHeight({ byRow: true });
      $('.related-product-item h3').matchHeight({ byRow: true });
      $('.{{ section_id }}').slick({
        infinite: true,
        slidesToShow: 6,
        arrows: false,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        responsive: [
          {
            breakpoint: 920,
            settings: {
              arrows: false,
              centerMode: true,
              centerPadding: '40px',
              slidesToShow: 4,
              slidesToScroll: 1,
            },
          },
          {
            breakpoint: 720,
            settings: {
              arrows: false,
              centerMode: true,
              centerPadding: '40px',
              slidesToShow: 3,
              slidesToScroll: 1,
            },
          },
          {
            breakpoint: 568,
            settings: {
              arrows: false,
              centerMode: true,
              centerPadding: '40px',
              slidesToShow: 1,
              slidesToScroll: 1,
            },
          },
        ],
      });
    });
  </script>
</div>
